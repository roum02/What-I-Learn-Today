# 스냅샷으로서의 state

## State in React (스냅샷으로서의 State)

React의 State는 스냅샷처럼 동작합니다. 한 번 설정된 시점의 상태를 기반으로 렌더링되며, 즉시 변경되지 않고 다음 렌더링 시 반영됩니다.

### 핵심 개념

State는 스냅샷처럼 동작한다

State 변수를 선언해도 이미 저장된 State 값은 즉시 변하지 않음

렌더링이 발생해야 화면에 반영됨

컴포넌트가 1 시점의 스냅샷을 가진다

props, state, local 변수 모두 렌더링 시점의 값을 사용

useState로 생성된 상태는 렌더링마다 스냅샷이 유지됨

리액트의 State 업데이트는 비동기적

여러 번 setState를 호출해도, 렌더링 사이클이 끝난 뒤 한 번에 반영됨

```
onClick = () => {
  setState(number + 1);
  setState(number + 1);
  setState(number + 1);
};
```

위 코드는 number를 3번 +1 하려는 의도이지만,
렌더링 전까지는 여전히 같은 스냅샷의 값을 참조하기 때문에
최종 결과가 예상과 다를 수 있습니다.

### 동작 원리

State는 다음 렌더링에 대해서만 업데이트됨

0에서 시작 → +1을 3번 호출 → 여전히 0에서 +1 한 번만 적용된 결과가 렌더링됨

업데이트 시 주의

같은 렌더링 사이클에서 이전 state 값을 기반으로 연속 업데이트하려면 함수형 업데이트를 사용해야 함:

setState(prev => prev + 1);
setState(prev => prev + 1);
setState(prev => prev + 1);

이렇게 하면 prev가 최신 상태 값을 참조하기 때문에
의도한 대로 3번 증가합니다.

### 요약

개념 설명
스냅샷(Snapshot) 렌더링 시점의 state 값을 기억하는 형태
비동기 업데이트 setState는 즉시 적용되지 않고 다음 렌더링에 반영
함수형 업데이트 이전 값을 기반으로 여러 번 업데이트 시 필수
💡 참고 사항

State 변경은 곧바로 변수 값이 바뀌는 것이 아니라 렌더링이 트리거되어야 실제 값이 반영됩니다.

렌더링마다 새로운 스냅샷을 가지고 있으므로, 항상 이전 값을 기반으로 한 업데이트를 고려해야 합니다.
